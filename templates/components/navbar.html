{% load static %}
<nav class="navbar navbar-expand-lg sticky-top">
    <div class="container-fluid">
        <button class="btn btn-link d-md-none me-2" type="button" id="sidebarToggle">
            <i class="bi bi-list fs-4"></i>
        </button>

        <a class="navbar-brand d-flex align-items-center" href="{% url 'contabilidade:dashboard' %}">
            <img src="{% static 'img/logo.svg' %}" alt="AgentNFe" height="32" class="me-2">
        </a>

        <ul class="navbar-nav ms-auto flex-row align-items-center">
            <!-- Notifications -->
            <li class="nav-item dropdown me-3">
                <a class="nav-link position-relative" href="#" data-bs-toggle="dropdown">
                    <i class="bi bi-bell fs-5"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 0.6rem;">
                        3
                    </span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><h6 class="dropdown-header">Notificações</h6></li>
                    <li><a class="dropdown-item" href="#">
                        <i class="bi bi-file-earmark-check text-success me-2"></i>
                        Nova nota emitida
                    </a></li>
                    <li><a class="dropdown-item" href="#">
                        <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                        Certificado expirando
                    </a></li>
                    <li><a class="dropdown-item" href="#">
                        <i class="bi bi-chat-dots text-info me-2"></i>
                        Nova sessão iniciada
                    </a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-center" href="#">Ver todas</a></li>
                </ul>
            </li>

            <!-- User Menu -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle d-flex align-items-center p-0" href="#" data-bs-toggle="dropdown">
                    <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                        <span class="text-white fw-bold" style="font-size: 0.8rem;">
                            {{ user.first_name|slice:":1"|upper }}{{ user.last_name|slice:":1"|upper }}
                        </span>
                    </div>
                    <span class="d-none d-lg-inline ms-2">{{ user.first_name|default:user.email }}</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                        <div class="dropdown-header">
                            <strong>{{ user.get_full_name|default:user.email }}</strong>
                            <br>
                            <small class="text-muted">{{ user.get_role_display }}</small>
                        </div>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item" href="{% url 'account:profile' %}">
                            <i class="bi bi-person me-2"></i>Meu Perfil
                        </a>
                    </li>
                    {% if user.contabilidade %}
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="bi bi-building me-2"></i>{{ user.contabilidade.nome|truncatechars:25 }}
                        </a>
                    </li>
                    {% endif %}
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item text-danger" href="{% url 'account:logout' %}">
                            <i class="bi bi-box-arrow-right me-2"></i>Sair
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</nav>
